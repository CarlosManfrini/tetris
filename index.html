<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tetris Original</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: #111;
      color: #fff;
      font-family: sans-serif;
    }
    canvas {
      background: #222;
      border: 2px solid #555;
    }
    .controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }
    .btn {
      background: #444;
      border: none;
      color: white;
      font-size: 20px;
      padding: 15px;
      border-radius: 10px;
      flex: 1;
    }
  </style>
</head>
<body>
  <h2>Tetris Original</h2>
  <canvas id="game" width="200" height="400"></canvas>
  <div class="controls">
    <button class="btn" onclick="move(-1)">◀</button>
    <button class="btn" onclick="rotate()">⟳</button>
    <button class="btn" onclick="move(1)">▶</button>
    <button class="btn" onclick="drop()">▼</button>
  </div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const rows = 20, cols = 10, size = 20;
    const board = Array.from({length: rows}, () => Array(cols).fill(0));

    const shapes = [
      [[1,1,1,1]],
      [[1,1],[1,1]],
      [[0,1,0],[1,1,1]],
      [[1,0,0],[1,1,1]],
      [[0,0,1],[1,1,1]],
      [[1,1,0],[0,1,1]],
      [[0,1,1],[1,1,0]]
    ];

    let piece = randomPiece();
    let gameOver = false;

    function randomPiece() {
      const shape = shapes[Math.floor(Math.random()*shapes.length)];
      return {shape, x:3, y:0};
    }

    function drawBoard(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(let y=0;y<rows;y++){
        for(let x=0;x<cols;x++){
          if(board[y][x]){
            ctx.fillStyle = "cyan";
            ctx.fillRect(x*size,y*size,size,size);
          }
        }
      }
      drawPiece();
    }

    function drawPiece(){
      ctx.fillStyle = "orange";
      piece.shape.forEach((row,dy)=>{
        row.forEach((val,dx)=>{
          if(val){
            ctx.fillRect((piece.x+dx)*size,(piece.y+dy)*size,size,size);
          }
        });
      });
    }

    function collide(){
      return piece.shape.some((row,dy)=>
        row.some((val,dx)=>{
          if(val){
            let x=piece.x+dx,y=piece.y+dy;
            return x<0||x>=cols||y>=rows||board[y][x];
          }
          return false;
        })
      );
    }

    function merge(){
      piece.shape.forEach((row,dy)=>{
        row.forEach((val,dx)=>{
          if(val){
            board[piece.y+dy][piece.x+dx]=1;
          }
        });
      });
    }

    function clearLines(){
      for(let y=rows-1;y>=0;y--){
        if(board[y].every(v=>v)){
          board.splice(y,1);
          board.unshift(Array(cols).fill(0));
          y++;
        }
      }
    }

    function rotate(){
      const rotated = piece.shape[0].map((_,i)=>piece.shape.map(r=>r[i]).reverse());
      const old = piece.shape;
      piece.shape = rotated;
      if(collide()) piece.shape = old;
    }

    function move(dir){
      piece.x+=dir;
      if(collide()) piece.x-=dir;
    }

    function drop(){
      piece.y++;
      if(collide()){
        piece.y--;
        merge();
        clearLines();
        piece = randomPiece();
        if(collide()){
          gameOver=true;
          alert("Game Over");
          location.reload();
        }
      }
    }

    document.addEventListener("keydown",e=>{
      if(e.key==="ArrowLeft") move(-1);
      if(e.key==="ArrowRight") move(1);
      if(e.key==="ArrowUp") rotate();
      if(e.key==="ArrowDown") drop();
    });

    function loop(){
      if(!gameOver){
        drop();
        drawBoard();
        setTimeout(loop,500);
      }
    }
    loop();
  </script>
</body>
</html>
